From 1601a9912c33035adf4b23aaff3b8030142c7e93 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Marc-Andr=C3=A9=20Lureau?= <marcandre.lureau@gmail.com>
Date: Sat, 22 Nov 2014 02:14:42 +0100
Subject: [PATCH] Fix build with !USE_SKIA_GPU

 gfx/2d/SourceSurfaceSkia.cpp | 2 ++
 gfx/2d/SourceSurfaceSkia.h   | 3 ++-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/gfx/2d/SourceSurfaceSkia.cpp b/gfx/2d/SourceSurfaceSkia.cpp
index 4b95bc2..29ee658 100644
--- a/gfx/2d/SourceSurfaceSkia.cpp
+++ b/gfx/2d/SourceSurfaceSkia.cpp
@@ -91,6 +91,7 @@ SourceSurfaceSkia::InitFromData(unsigned char* aData,
   return true;
 }
 
+#ifdef USE_SKIA_GPU
 bool
 SourceSurfaceSkia::InitFromTexture(DrawTargetSkia* aOwner,
                                    unsigned int aTexture,
@@ -116,6 +117,7 @@ SourceSurfaceSkia::InitFromTexture(DrawTargetSkia* aOwner,
   mDrawTarget = aOwner;
   return true;
 }
+#endif
 
 unsigned char*
 SourceSurfaceSkia::GetData()
diff --git a/gfx/2d/SourceSurfaceSkia.h b/gfx/2d/SourceSurfaceSkia.h
index de57602..d572560 100644
--- a/gfx/2d/SourceSurfaceSkia.h
+++ b/gfx/2d/SourceSurfaceSkia.h
@@ -41,6 +41,7 @@ public:
                       SurfaceFormat aFormat,
                       DrawTargetSkia* aOwner);
 
+#ifdef USE_SKIA_GPU
   /**
    * NOTE: While wrapping a Texture for SkiaGL, the texture *must* be created
    *       with the same GLcontext of DrawTargetSkia
@@ -49,7 +50,7 @@ public:
                        unsigned int aTexture,
                        const IntSize &aSize,
                        SurfaceFormat aFormat);
-
+#endif
   virtual unsigned char *GetData();
 
   virtual int32_t Stride() { return mStride; }
