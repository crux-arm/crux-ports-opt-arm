# Description: A programming language designed for extending applications
# URL: http://www.lua.org
# Maintainer: Tilman Sauerbeck, tilman at crux dot nu
# Arch Maintainer: CRUX-ARM System Team, devel at crux-arm dot nu
# Depends on:

name=lua
version=5.1.4.3
release=1
source=(http://www.lua.org/ftp/$name-5.1.4.tar.gz \
        http://www.lua.org/ftp/patch-lua-5.1.4-3 \
        $name.diff)

build() {
  cd $name-5.1.4

  export CFLAGS="$CFLAGS -fPIC"
  patch -d src -p0 -i $SRC/patch-lua-5.1.4-3
  patch -Np1 -i $SRC/$name.diff

  make linux
  make INSTALL_TOP=$PKG/usr install

  install -D -m 0644 etc/lua.pc $PKG/usr/lib/pkgconfig/lua.pc
}
